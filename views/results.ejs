<!DOCTYPE html>
<html lang="en">
  <head>
    <title>room8 â€“ Results</title>

    <title>Poll Results</title>

    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" type="text/css" />
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/styles/header.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/footer.css" type="text/css" />
    <link rel="stylesheet" href="/styles/results.css" type="text/css"/>
    <!-- Logo Font -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans|Ubuntu&display=swap" rel="stylesheet">

    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="/scripts/app.js"></script>
    <!-- Charts.js-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script type="text/javascript" src="/scripts/chartSetting.js"></script>
  </head>

  <body>
    <% include ../partials/_header %>
    <main class="results-pg">
      <div id="poll-results-header""">
        <h1>Poll Results</h1>

        <div id="response-prompts">
          <ul>
            <li>Responses: 3</li>
            <li>Awaiting: 1</li>
          </ul>
        </div>
      </div>
      
      <h2><%= question %></h2>
      <article id="poll-results">

          <div id="ranking">
            <h4>Survey Says:</h4>
              <%= options[0]%>
          </div>

        <div id="poll-visualization">
            <canvas id="resultsChart"></canvas>
        </div>

      </article>

      <article id="poll-submissions-links">
        <title>Links</title>
        <p>Links are listed below, awaiting responses are denoted as red.</p>

        <table id="submission-links">
            <tr>
              <th>Status</th>
              <th id="link-column-name">Link</th>
            </tr>
            <% for (let i = 0; i < links.length; i++) { %>
            <tr>
              <% if (answersProvided) { %>
              <td>INACTIVE</td>
              <% } else { %>
                <td>ACTIVE</td>
              <% } %>
              <td class="subLink"><%= links[i] %></td>
              <% if (!answersProvided) { %>
              <td><button onclick="copyURL('#subLink')">Copy URL</button></td>
              <% } %>
            </tr>
            <% } %>
          </table>

          <div id="poll-buttons">
            <button onclick="window.location.reload();">Add NEW URL</button>
            <br>

            <button>** END POLL **</button>
          </div>

      </article>
    </main>
    <% include ../partials/_footer %>

    <script>
      function copyURL(element) {
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val($(element).text()).select();
        document.execCommand("copy");
        $temp.remove();
      }
    </script>
  </body>
</html>
